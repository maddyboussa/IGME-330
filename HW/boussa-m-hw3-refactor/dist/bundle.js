(()=>{"use strict";var e,t,n,o,r,a,i,l,c,s,u,d,h,v,g,f,m,w,y=Object.freeze({gain:.5,numSamples:256}),T=function(e){t.src=e},p=function(){function e(e,t,n,o){Object.assign(this,{x:e,y:t,radius:n,color:o})}return e.prototype.draw=function(e){e.save(),e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.fill(),e.restore()},e.type="arc",e}(),S=function(){function e(e,t,n,o,r){Object.assign(this,{x:e,y:t,width:n,height:o,color:r})}return e.prototype.draw=function(e){e.save(),e.fillStyle=this.color,e.fillRect(this.x,this.y,this.width,this.height),e.restore()},e}();!function(e){e.sound1="media/AAA_Powerline.mp3"}(w||(w={}));var q={visMethod:1,drawMethod:"circles"},b=function(n){document.querySelector("#btn-fs").onclick=function(e){var t;console.log("goFullscreen() called"),(t=n).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()};var o=document.querySelector("#btn-play");o.onclick=function(n){var o=n.target;"suspended"==e.state&&e.resume(),"no"==o.dataset.playing?(t.play(),o.dataset.playing="yes"):(t.pause(),o.dataset.playing="no")};var l=document.querySelector("#slider-volume"),c=document.querySelector("#label-volume");l.oninput=function(e){var t,n=e.target;t=n.value,r.gain.value=t,c.innerHTML=Math.round(Number(n.value)/2*100).toString()},l.dispatchEvent(new Event("input")),document.querySelector("#track-select").onchange=function(e){var t=e.target;T(t.value),"yes"==o.dataset.playing&&o.dispatchEvent(new MouseEvent("click"))},document.querySelector("#vis-select").onchange=function(e){var t=e.target;q.visMethod=Number(t.value)},document.querySelector("#draw-select").onchange=function(e){var t=e.target;q.drawMethod=t.value};var s=document.querySelector("#slider-treble"),u=document.querySelector("#label-treble");s.oninput=function(t){var n,o=t.target;n=o.value,a.gain.setValueAtTime(n,e.currentTime),u.innerHTML=Math.round(Number(o.value)).toString()},s.dispatchEvent(new Event("input"));var d=document.querySelector("#slider-bass"),h=document.querySelector("#label-bass");d.oninput=function(t){var n,o=t.target;n=o.value,i.gain.setValueAtTime(n,e.currentTime),h.innerHTML=Math.round(Number(o.value)).toString()},d.dispatchEvent(new Event("input"));var v=document.querySelector("#burger"),g=document.querySelector("#nav-links");v.onclick=function(){g.classList.toggle("is-active")}},M=function(){setTimeout(M,1e3/60),function(e){if(1==e.visMethod?u.getByteFrequencyData(d):2==e.visMethod&&u.getByteTimeDomainData(d),l.save(),l.fillStyle="black",l.globalAlpha=.1,l.fillRect(0,0,c,s),l.restore(),"circles"==e.drawMethod){l.save();for(var t=0;t<d.length;t++){var n=(r=d[t]/255)*h;f.radius=n,f.color=(0,1,void 0===(a=r)&&(a=1),"rgba(".concat(1,",").concat(0,",").concat(1,",").concat(a,")")),f.draw(l),m.radius=.7*n,m.draw(l)}l.restore(),l.save(),l.translate(g+400,v-40);var o=700;for(t=0;t<d.length;t++){var r=d[t]/255;l.translate(1,0),l.rotate(2*Math.PI/d.length),l.save(),l.scale(1,-1),new S(0,0,1,o*r,"white").draw(l),l.restore(),l.translate(1,0)}l.restore()}var a;if("bars"==e.drawMethod){l.save(),l.translate(0,v),o=200;var i=c/d.length;for(t=0;t<d.length;t++)r=d[t]/255,l.translate(i,0),l.save(),new S(0,0,10,o*r,"white").draw(l),l.save(),l.scale(1,-1),new S(0,0,10,o*r,"white").draw(l),l.restore(),l.restore(),l.translate(1,0);l.restore()}if("lines"==e.drawMethod){l.save(),l.strokeStyle="white",l.lineWidth=1;var w=0,y=v;for(l.beginPath(),l.moveTo(w,y),t=0;t<d.length;t++)l.lineTo(w,y-d[t]),w+=l.canvas.width/(d.length-10);l.lineTo(w-8,y),w=c,l.lineTo(w,y),l.stroke(),l.closePath(),l.restore(),l.save(),l.strokeStyle="white",l.lineWidth=1;var T=0,p=v+5;for(l.beginPath(),l.moveTo(T,p),t=0;t<d.length;t++)l.lineTo(T,p+d[t]),T+=l.canvas.width/(d.length-10);l.lineTo(T-8,p),T=c,l.lineTo(T,p),l.stroke(),l.closePath(),l.restore(),l.save(),l.strokeStyle="white",l.lineWidth=1;var q=c,b=v;for(l.beginPath(),l.moveTo(q,b),t=0;t<d.length;t++)l.lineTo(q,b-d[t]),q-=l.canvas.width/(d.length-10);l.lineTo(q-8,b),q=0,l.lineTo(q,b),l.stroke(),l.closePath(),l.restore(),l.save(),l.strokeStyle="white",l.lineWidth=1;var M=c,k=v+5;for(l.beginPath(),l.moveTo(M,k),t=0;t<d.length;t++)l.lineTo(M,k+d[t]),M-=l.canvas.width/(d.length-10);l.lineTo(M-8,k),M=0,l.lineTo(M,k),l.stroke(),l.closePath(),l.restore()}}(q)};window.onload=function(){var S;console.log("window.onload called"),(S=new XMLHttpRequest).onload=function(e){var t=e.target;console.log("In onload - HTTP Status Code = ".concat(t.status));var n,o=t.responseText;try{n=JSON.parse(o)}catch(e){return void console.log("JSON.parse() failed")}document.querySelector("title").innerHTML=n.title;for(var r,a,i=document.querySelector("#track-select"),l=0;l<n.numTracks;l++)r=n.tracks[l].file,a=n.tracks[l].track,i.innerHTML+=l<=0?'<option value="media/'.concat(r,'" selected>').concat(a,"</option>"):'<option value="media/'.concat(r,'">').concat(a,"</option>"),console.log(r,a);document.querySelector("#instructions-text").innerHTML=n.instructions},S.onerror=function(e){var t=e.target;console.log("In onerror - HTTP Status Code = ".concat(t.status))},S.open("GET","data/av-data.json"),S.send(),function(){var S,q;S=w.sound1,q=window.AudioContext,e=new q,t=new Audio,T(S),n=e.createMediaElementSource(t),(o=e.createAnalyser()).fftSize=y.numSamples,(r=e.createGain()).gain.value=y.gain,(a=e.createBiquadFilter()).type="highshelf",a.frequency.setValueAtTime(1e3,e.currentTime),(i=e.createBiquadFilter()).type="lowshelf",i.frequency.setValueAtTime(1e3,e.currentTime),n.connect(a),a.connect(i),i.connect(o),o.connect(r),r.connect(e.destination);var k=document.querySelector("canvas");b(k),function(e,t){l=e.getContext("2d"),c=e.width,s=e.height,u=t,d=new Uint8Array(u.fftSize/2),f=new p(c/2,s/2,1,"white"),m=new p(c/2,s/2,1,"white"),h=s/9,v=s/2,g=s/2}(k,o),M()}()}})();
//# sourceMappingURL=bundle.js.map